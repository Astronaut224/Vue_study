# vue-cli创建项目

https://cli.vuejs.org/zh/guide/

## 项目结构

vue项目中 src 目录的构成

```
assets 文件夹：存放项目中用到的静态资源，例如：css样式表、图片资源
components 文件夹：程序员封装的、可复用的组件
main.js ：项目的入口文件，整个项目执行、打包，要先运行main.js
App.vue ：项目的根组件
```

## vue组件

vue规定组件是 .vue 结尾的文件，主要用于 UI 结构的复用。

.vue 组件由3部分构成：

- template -> 组件的模板结构
- script -> 组件的JavaScript行为
- style -> 组建的样式

### vue中的script

```vue
<script>
	// 默认导出，这是固定写法
    export default {
        // data数据源
        // 注意：vue组件中 data 不能指向对象，必须是一个函数
        data () {
            return {
                username: 'zhangsan',
            }
        },
        // 事件函数还是写在methods里
        methods: {
            changeName() {
                // 组件中，this 表示当前组件的实例对象
                console.log(this);
                this.username = 'lisi'；
            }
        },
        // 组件
        components: {
            
        },
        // 当前组件中的侦听器
        watch: {
            
        },
        // 当前组件的计算属性
        computed: {
            
        },
        // 过滤器，限vue2.0中
        filters: {
            
        }
    }
</script>
```

### vue中的template

Vue的 template 只允许有一个根元素，所以记住在template中加一个div作为根元素，所有代码都写在这个div中。

```vue
<template>
	<div>
        ...
    </div>
</template>
```

### vue中的style

如果要启用 less 预处理器，可以在 style 标签中设置。

```vue
<style lang="less">
	...
</style>
```



### 使用组件的3个步骤

步骤1：使用 import 语法导入需要的组件

```vue
<script>
	import Left from '@/components/left.vue';
</script>
```

步骤2：使用 components 节点注册组件

```vue
<script>
	export default {
        components: {
            Left,
        }
    }
</script>
```

步骤3：以标签的形式使用组件

```vue
<template>
	<div>
        <Left></Left>
    </div>
</template>
```

注意：在父组件中通过 components 节点注册的组件是 私有子组件。

- 注册全局组件：

在 main.js 中使用 Vue.componen()

```
import Left from '@/components/left.vue';

Vue.component('MyLeft', Left);

// 可以在所有组件中使用
<MyLeft></MyLeft>
```

### 组件中的props

props 是组件的自定义属性，封装组件时可以提高组件的通用性。

现在有组件关系 父 -> 子：

App.vue -> Left.vue -> Count.vue

App.vue -> Right.vue -> Count.vue

Left 和 Right 都是用来 Count 组件，但要求两个不同的初始值。可以在Count组件中用 props 定义一个初始值 first ，然后在 Left 和 Right 中分别设置不同的初始值。

```vue
Count.vue

<template>
  <div>
    <h3>Count组件</h3>
    <p>Count的值：{{ count }}</p>
    <!-- <p>Count的值：{{ first }}</p> -->
    <br>
    <button @click="add">+1</button>
  </div>
</template>

<script>
export default {
    // 1. props 是自定义属性，允许使用者通过自定义属性为当前组件设置初始值
    // 2. 自定义属性名字是封装者自己设置的，只要合法就可以
    // 3. props的值可以直接在模板结构中使用
    // 4. 注意：props是只读的，不要直接修改props的值，否则会报错
    props: ['first'],
    data () {
        return {
            count: this.first
        }
    },
    methods: {
        add() {
            this.count += 1;
        }
    }
}
</script>
```

```vue
Left.vue
<template>
	<div id="#left">
        <Count :first=3></Count>
    </div>
</template>
```

```vue
Right.vue
<template>
	<div id="#left">
        <Count :first=9></Count>
    </div>
</template>
```

- 注意点：
  - props的值可以直接在template模板结构中使用
  - **props是只读的。**在父组件中可以设置 props 的值，但是像 Count.vue 涉及到计算修改值了就不能直接使用 props ，而是将 props 赋值给 data 中的 数据。

#### props的配置项

```vue
<script>
export default {
    props: {
        first: {
            // 用default属性定义默认值
            default: 0,
            // 用type属性指定 first 的类型必须是 Number 数字
            type: Number，
            // required设置 first 是否是必填项，如果使用组件时填写 first 的值就报错
            required: true
        }
    },
}
</script>
```

#### 组件间传值

- 父向子传值

父组件

```vue
<template>
  <div id="app">
    <h1>App根组件</h1>
    <hr>
    <!-- message是简单类型的数据，直接复制值过来 -->
    <!-- userInfo是复杂类型的数据，复制引用过来 -->
    <Left :msg="message" :user="userInfo"></Left>
    <Right></Right>
  </div>
</template>

<script>
import Left from '@/components/Left.vue';
import Right from '@/components/Right.vue';

export default {
  name: 'App',
  components: {
    Left,
    Right
  },
  data() {
    return {
      message: '这是父组件定义的数据',
      userInfo: {name: 'zhangsan', age: 20}
    }
  }
}
</script>
```

子组件

```vue
<template>
  <div id="left">
    <h2>Left组件</h2>
    <hr>
    <p>msg的值是：{{ msg }}</p>
    <p>user的值是：{{ user }}</p>
  </div>
</template>

<script>

export default {
  props: ['msg', 'user']
}
</script>
```



